function changeLang(t){t===$ZHTW.type&&($AlertMsg=$ZHTW.msg,$Content.game.langData=$ZHTW.game,$Modal.gameHelp.langData=$ZHTW.game,$Modal.register.langData=$ZHTW.game,$Content.game.statistics.source="icon_tj",$Content.game.invite.source="icon_tjzc",$Content.game.faq.source="icon_gl",$Content.game.lang.source="icon_ft",$Content.game.buyBtnG.$children[1].source="btn_text_gmyc_zh",$Content.game.withdrawBtn.$children[1].source="yx_text_tq_zh",$Content.game.stelaTitle.source="yx_text_cjxh_zh",$Content.game.stelaTitle2.source="yx_text_jc_zh",$Content.game.myNumImg.source="yx_text_fhqy_zh",$Content.game.timesImg.source="yx_text_ljcs_zh",$Content.game.allBuyImg.source="yx_text_ljtr_zh",$Content.game.inviteImg.source="yx_text_dqsy_zh",$Content.game.bonusImg.source="yx_text_fhsy_zh",$Content.game.winImg.source="yx_text_ktsy_zh",$Content.game.earning.source="yx_text_ldz_zh",$Content.game.pToearning.source="yx_text_zbld_zh",$Content.game.alertModal.$children[0].source="special_effects_text_png",$Content.game.roundZh.visible=!0,$Content.game.roundEn.visible=!1,$Modal.gameHelp.langTitleImg.source="title_text_faq_zh",$Modal.gameAlert.title.source="title_text_ts",$Modal.gameAlert.submitBtn.$children[1].source="btn_text_fz_zh",$Modal.register.title.source="title_text_referee_zh",$Modal.register.registerBtn.$children[1].source="btn_text_yqdy_zh",$Modal.register.linkGroup.$children[0].source="title_text_yqlj_zh",$Modal.register.copyBtn.$children[1].source="btn_text_fz_1_zh",$Modal.gameStatistics.title.source="title_text_strategy_zh",$Modal.gameStatistics.tabAct1.visible=!0,$Modal.gameStatistics.tabActEn1.visible=!1,$Modal.gameStatistics.tabAct2.visible=!0,$Modal.gameStatistics.tabActEn2.visible=!1,$Modal.gameStatistics.tabAct3.visible=!0,$Modal.gameStatistics.tabActEn3.visible=!1,$Modal.gameStatistics.overtimeImg.source="statistics_stats_text_djs_zh",$Modal.gameStatistics.potImg.source="statistics_stats_text_dc_zh",$Modal.gameStatistics.listNum.source="statistics_stats_text_dr_zh",$Modal.gameStatistics.totalInvestment.source="statistics_stats_text_ti_zh",$Modal.approve.title.source="title_text_ts",$Modal.approve.submitBtn.$children[1].source="btn_sure_zh",$Modal.approve.cancelBtn.$children[1].source="btn_cancel_zh"),t===$EN.type&&($AlertMsg=$EN.msg,$Content.game.langData=$EN.game,$Modal.gameHelp.langData=$EN.game,$Modal.register.langData=$EN.game,$Content.game.statistics.source="icon_tj_en",$Content.game.invite.source="icon_tjzc_en",$Content.game.faq.source="icon_gl_en",$Content.game.lang.source="icon_ft_en",$Content.game.buyBtnG.$children[1].source="btn_text_gmyc_en",$Content.game.withdrawBtn.$children[1].source="yx_text_tq_en",$Content.game.stelaTitle.source="yx_text_cjxh_en",$Content.game.stelaTitle2.source="yx_text_jc_en",$Content.game.myNumImg.source="yx_text_fhsy_en",$Content.game.timesImg.source="yx_text_ljcs_en",$Content.game.allBuyImg.source="yx_text_ljtr_en",$Content.game.inviteImg.source="yx_text_dqsy_en",$Content.game.bonusImg.source="yx_text_fhsy_en",$Content.game.winImg.source="yx_text_ktsy_en",$Content.game.earning.source="yx_text_ldz_en",$Content.game.pToearning.source="yx_text_zbld_en",$Content.game.alertModal.$children[0].source="special_effects_text_en_png",$Content.game.roundZh.visible=!1,$Content.game.roundEn.visible=!0,$Modal.gameHelp.langTitleImg.source="title_text_faq_en",$Modal.gameAlert.title.source="title_text_ts_en",$Modal.gameAlert.submitBtn.$children[1].source="btn_text_fz_en",$Modal.register.title.source="title_text_referee_en",$Modal.register.registerBtn.$children[1].source="btn_text_yqdy_en",$Modal.register.linkGroup.$children[0].source="title_text_yqlj_en",$Modal.register.copyBtn.$children[1].source="btn_text_fz_1_en",$Modal.gameStatistics.title.source="title_text_strategy_en",$Modal.gameStatistics.tabAct1.visible=!1,$Modal.gameStatistics.tabActEn1.visible=!0,$Modal.gameStatistics.tabAct2.visible=!1,$Modal.gameStatistics.tabActEn2.visible=!0,$Modal.gameStatistics.tabAct3.visible=!1,$Modal.gameStatistics.tabActEn3.visible=!0,$Modal.gameStatistics.overtimeImg.source="statistics_stats_text_djs_en",$Modal.gameStatistics.potImg.source="statistics_stats_text_dc_en",$Modal.gameStatistics.listNum.source="statistics_stats_text_dr_en",$Modal.gameStatistics.totalInvestment.source="statistics_stats_text_ti_en",$Modal.approve.title.source="title_text_ts_en",$Modal.approve.submitBtn.$children[1].source="btn_sure_en",$Modal.approve.cancelBtn.$children[1].source="btn_cancel_en")}function getLanStatus(){var t=localStorage.getItem("language");t&&(langStatus=t,changeLang(t),setLanguageModalState(langStatus))}function setLanguageModalState(t){t===$ZHTW.type&&($Modal.language.title.source="yuyan_text_zh",$Modal.language.langZHTW_choosed.visible=!0,$Modal.language.langEN_choosed.visible=!1),t===$EN.type&&($Modal.language.title.source="yuyan_text_en",$Modal.language.langZHTW_choosed.visible=!1,$Modal.language.langEN_choosed.visible=!0)}function setHLayoutLeft(){var t=new eui.HorizontalLayout;return t.gap=20,t.horizontalAlign=egret.HorizontalAlign.LEFT,t}function getNetWork(){return new Promise(function(t){if("undefined"!=typeof web3||"undefined"!=typeof parent.window.web3){if(web3=web3||parent.window.web3,web3.version.getNetwork)return getNetWork1().then(function(){t()});web3.eth.net.getId().then(function(e){switch(e.toString()){case"1":web3js=new Web3(web3.currentProvider),t(),web3js.eth.getAccounts(function(t,e){$myAddress=e[0]});var n=setInterval(function(){web3js.eth.getAccounts(function(t,e){$myAddress=e[0],$myAddress||clearInterval(n)})},2e3);break;default:web3js=new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/")),t()}})}else web3js=new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/")),t()})}function getNetWork1(){return new Promise(function(t){"undefined"!=typeof web3?web3.version.getNetwork(function(e,n){switch(n){case"1":web3js=new Web3(web3.currentProvider),t(),$myAddress=window.location.href.split("?")[1],web3js.isAddress($myAddress)||($myAddress=web3js.eth.accounts[0]);var a=setInterval(function(){$myAddress=window.location.href.split("?")[1],web3js.isAddress($myAddress)||($myAddress=web3js.eth.accounts[0]),$myAddress||clearInterval(a)},2e3);break;default:web3js=new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/")),t()}}):(web3js=new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/")),t())})}function getJson(){return new Promise(function(t,e){fetch("contract/NineGods.json",{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(t){return t.json()},function(t){e(t)}).then(function(n){$gameContract=web3js.eth.contract(n.abi),$gameContractInstance=$gameContract.at("0x13552c7cc9ce39af665955412faa08f0e6555a29"),fetch("contract/Token.json",{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(t){return t.json()},function(t){e(t)}).then(function(e){$tokenContract=web3js.eth.contract(e.abi),$tokenContractInstance=$tokenContract.at("0xAB4E1802c61e12fd7b10a69A226F5D727c76a8Aa"),t($tokenContractInstance)})})})}function timestampToTime(t){t=10===t.length?1e3*t:1*t;var e=new Date(t),n=e.getFullYear()+".",a=fillZero(e.getMonth()+1)+".",i=fillZero(e.getDate())+" ",o=fillZero(e.getHours())+":",r=fillZero(e.getMinutes())+":",s=fillZero(e.getSeconds());return n+a+i+o+r+s}function fillZero(t){return t=10>t?"0"+t:t}function timestampToMoment(t){t=0>t?0:t;var e=fillZero(Math.floor(t/60/60))+":",n=fillZero(Math.floor(t/60%60))+":",a=fillZero(t%60);return e+n+a}function setOverTime(){return new Promise(function(t,e){getBjTime().then(function(n){$gameContractInstance.overMoment(function(a,i){if(a)e(a);else{var o=i.toString();t(o-Number(n)/1e3)}})})})}function getBjTime(){return new Promise(function(t,e){var n=Date.parse((new Date).toString());t(n)})}function getTotalPot(){return new Promise(function(t,e){$gameContractInstance.getTotalPot(function(n,a){n?e(n):t(web3js.fromWei(a))})})}function getMyKeyProp(){return new Promise(function(t,e){$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(n,a){n?e(n):$gameContractInstance.playerxID_(a,function(n,a){n?e(n):t(a)})})})}function getMyEtraProp(){return new Promise(function(t,e){$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(n,a){n?e(n):$gameContractInstance.playerEtraxAddr_(a,function(n,a){n?e(n):t(a)})})})}function getKeyMapping(){return new Promise(function(t,e){$myAddress&&$gameContractInstance.playerEtraxID_($myAddress,function(n,a){n?e(n):t(a[4])})})}function getIsBegin(){return new Promise(function(t,e){$gameContractInstance.isBegin(function(n,a){n?e(n):t(a)})})}function $alert(t){0===tabStatus&&($Modal.gameAlert.msg=t,$Modal.gameAlert.visible=!0)}function notSignInMetamask(){$alert("You're not signed into metamask")}function netWorkError(){$alert("Network Error")}function $modalShowEvent(t,e){t.visible=!0;var n=t.$children[1],a=egret.Tween.get(n);a.to({y:e},200),a=null}function $closeModalFun(t,e){var n=t.$children[1],a=egret.Tween.get(n);a.to({y:e},200).call(function(){t.visible=!1,a=null})}function $getQueryIdString(){var t=window.location.search.substr(1).split("?")[0];return void 0==t.split("id=")[1]?window.btoa(t):t.split("id=")[1]}function $dragonBonesAnime(t){var e=localStorage.getItem("language"),n="";switch(t){case 1:n="lianDan";break;case 2:n=e?"zhtw"==e?"lianDan_finish_cn":"lianDan_finish_en":"lianDan_finish_cn";break;case 3:n=e?"zhtw"==e?"lianDan_newFriand_cn":"lianDan_newFriand_en":"lianDan_newFriand_cn";break;case 4:n="lianDan_pickUp"}""!=n&&($Modal.ainimeBg.visible=!0,$Content.container.addChild($Content.armatureDisplay),$Content.armature.animation.gotoAndPlay(n),dragonBones.WorldClock.clock.timeScale=3,dragonBones.WorldClock.clock.add($Content.armature))}function $showLoading(t){t?($Modal.buyLoading.visible=!0,setTimeout(function(){$Modal.buyLoading.visible=!1},3e3)):$Modal.buyLoading.visible=!1}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(i,o){function r(t){try{l(a.next(t))}catch(e){o(e)}}function s(t){try{l(a["throw"](t))}catch(e){o(e)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(r,s)}l((a=a.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return a([t,e])}}function a(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(a){n=[6,a],o=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},AinimeBgTs=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_modules/Modal/AinimeBg.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(AinimeBgTs.prototype,"AinimeBgTs");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function a(a){e.call(n,a,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?a(i):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Container=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.container,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),$Content.game=new Game,this.addChild($Content.game)},e.prototype.content=function(){$Modal.gameStatistics=new GameStatistics,$Modal.gameStatistics.visible=!1,this.addChild($Modal.gameStatistics),$Modal.register=new Register,$Modal.register.visible=!1,this.addChild($Modal.register),$Modal.gameHelp=new GameHelp,$Modal.gameHelp.visible=!1,this.addChild($Modal.gameHelp),$Modal.language=new LanguageTs,$Modal.language.visible=!1,this.addChild($Modal.language),$Modal.gameAlert=new GameAlert,$Modal.gameAlert.visible=!1,this.addChild($Modal.gameAlert),$Modal.approve=new ApproveTs,$Modal.approve.visible=!1,this.addChild($Modal.approve),$Modal.buyLoading=new BuyingTs,$Modal.buyLoading.visible=!1,this.addChild($Modal.buyLoading),$Modal.ainimeBg=new AinimeBgTs,$Modal.ainimeBg.visible=!1,this.addChild($Modal.ainimeBg);var t=RES.getRes("godEffect_ske_json"),e=RES.getRes("godEffect_tex_json"),n=RES.getRes("godEffect_tex_png"),a=dragonBones.EgretFactory.factory;a.parseDragonBonesData(t),a.parseTextureAtlasData(e,n);var i=a.buildArmature("armatureName"),o=i.getDisplay();o.x=540,o.y=750,$Content.armature=i,$Content.armatureDisplay=o,$Content.container.addEventListener(egret.Event.ENTER_FRAME,function(){dragonBones.WorldClock.clock.advanceTime(.01)},$Content.container),$Content.armature.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function(){$Content.container.removeChild($Content.armatureDisplay),dragonBones.WorldClock.clock.timeScale=0,$Modal.ainimeBg.visible=!1},$Content.container),dragonBones.WorldClock.clock.timeScale=3},e}(eui.Component);__reflect(Container.prototype,"Container");var $warn=egret.$warn,$ZHTW={type:"zhtw",container:{game:"遊戲"},game:{approve:"授權額度:",register_info_2:"· 玩家可在本頁面花費2 ODF購買成為隊長。",register_info_3:"· 隊長可獲得自己推薦的用戶購買投入的一部分ODF作為推薦人獎勵。",register_info_4:"· 隊長推薦的使用者也購買投入後隊長等級會得到提升（最高為3級）。等級越高可獲得的推薦人獎勵越多。",register_info_5:"· 玩家直接分享邀請的玩家視為第1玩家，第1玩家直接分享的玩家第2玩家，第2直接分享的玩家視為第3玩家，。。。當其中一位玩家購買後將給予其第1分享玩家一定的ODF分享權益獎勵。",help_text_1:"1. 遊戲如何結束？",help_text_2:"      遊戲倒計時24小時，玩家每煉丹1次增加30分鐘的遊戲時間，遊戲結束後，最後投入的10名玩家將會獲得ODF中的獲獎權益。",help_text_3:"2. 什麼是授權額度？",help_text_4:"     玩家開始遊戲需要對ODF進行授權，每次授權額度為10000，進行遊戲會消耗額度。額度為0後需要再次授權。",help_text_5:"3. 玩家如何獲得序號（煉丹）？",help_text_6:"      當玩家點擊煉丹後即可獲得序號。單次購買花費 200 ODF。每個玩家最多能有30次投入進入收益序列。當你的收益大於200 ODF時會自動扣除你的收益進行投入而不是你錢包的餘額。每複投10輪，玩家可以提取一輪的(200枚)ODF。",help_text_7:"4. 分享道友有什麼用？",help_text_8:"      玩家可在遊戲介面點擊“邀請”按鈕，購買分享連結邀請新玩家，將遊戲分享給其他人。\n當新玩家成功購買後視為分享成功。\n分享的玩家越多其分享等級越高，可以獲得的分享權益也越多。\n",help_text_9:"5. 如何獲得收益？",help_text_10:"      玩家獲得收益的方式如下：\nA.	玩家最新購買序號花費的ODF，將會作為收益（收益為部分所花費的ODF）給該序號之前的購買過且未出局的玩家。\nB.	玩家A可分享道友，將分享連結發給未購買過的玩家B，當玩家B在此地址成功煉丹（購買）後玩家A即可獲得分享道友收益。\nC.	每炼丹1000次，将分配部分奖池给最近下注的玩家，直到这部分奖池分完。\nD.	當遊戲時間結束最後購買的10名玩家可以獲得ODF權益。",help_text_11:"6. 結算權益如何分配？",help_text_12:"     遊戲時間結束後。以最後10筆交易為准產生權益玩家。",mainTips1:"剩餘煉丹次數",mainTips2:"同時最多可煉丹 30 次，每次需投入 200 ODF",link:"邀请链接"},msg:{zeroBalance:"余額為零，不能提現",copySuc:"復制成功",errorKey:"請輸入正確key數",errorReg:"格式錯誤！",errInput:"請輸入正確的個數",readyTime:"準備時間，不能購買！",selfReferrer:"不能推薦自己",isQueue:"投注次数大于10，不能投注！",alreadyBuy:"您發生的交易，正在以太坊網絡出塊打包進行中，請稍後。",inviteApprove:"进行邀请需要ODF\n现在将为你授权10000 ODF！\n",buyApprove:"进行炼丹需要ODF\n现在将为你授权10000 ODF！\n"}},$EN={type:"en",container:{game:"GAME"},game:{approve:"Authorized:",register_info_2:"· Address must be unique",register_info_3:"· Dont exceed 32 characters",register_info_4:"· Address must lower case and number",register_info_5:"· Address dont simply number",help_text_1:"1. How does the game end?",help_text_2:"Game Countdown - hours, each player invests 1 Times +30 minutes of game time, after the game is over, finally put into the Ten players will be awarded the jackpot in the prize pool.",help_text_3:"2. What is the degree of authorization?",help_text_4:"The player needs to start the game ODF Authority , each time it is granted the right to authorize 10000 ODF , the game will consume an extra degree. It will need to be granted again after 0 .",help_text_5:"3. ow to do ODF input?",help_text_6:"When the player clicks on alchemy, he can get the order. Buy a single time to spend the ODF. the maximum number of times each player can enter a revenue sequence. When your earnings are greater than ODF , you will automatically deduct your earnings into investment rather than the remainder of your wallet. for each round , the player can withdraw a round of principal.",help_text_7:"4. What's the use of the leader?",help_text_8:"Players can apply to be captain in the game, the captain can recommend the game to other people, when the recommended person in the game to put ODF , the captain can get the maximum Direct referral reward.\nIf the player recommended by the captain puts ODF, the captain will be able to raise the level.\nThe more recommended players, the higher the Captain level, the benefit of the referral will be increased, the highest not more than 5 level.\n",help_text_9:"5. How to get benefits?",help_text_10:"the way the player gains revenue is mainly divided into 3 class:\nA. Player Input ODF after that, if someone else continues to invest, and the current revenue sort is on the player, the player will get the benefit when equals maximum benefit, the player is out of the game, and the next profit sequence player starts earning revenue, which keeps cycling.\nB. Players can apply to become captain, create a Connection Sharing game to others, the captain can get the recommended person to put ODF for more details see Captain Fund allocation form\nC. per alchemy 1000 , part of the prize pool will be allocated to the most recently bet players until this part of the prize pool is divided.\nD. When the game is finished, the last thing you buy Ten players can get all the rewards of prize pool.\n",help_text_11:"6. Settlement reward.",help_text_12:"Game time is over . finally put in Ten players split all the prize pools.",mainTips1:"Remaining:",mainTips2:"You can make up to 30 shots,200 ODF every time",link:"My link:"},msg:{zeroBalance:"Balance is zero, cant be cashed out",copySuc:"Successful copy",errorKey:"Please enter the correct number of keys",errorReg:"Input format is wrong!",errInput:"Please enter the correct number",zeroInput:"The input cannot be zero",readyTime:"Preparation time, cannot be purchased！",selfReferrer:"Don't recommend  yourself",isQueue:"You are still in the queue and cannot be purchased",alreadyBuy:"The transaction you have made is being packaged in the ethereum network. Please wait.",inviteApprove:"Send needs ODF\nAuthorize 10000 ODF !",buyApprove:"Send needs ODF\nAuthorize 10000 ODF !"}},$AlertMsg=$ZHTW.msg,langStatus=$ZHTW.type,Loading=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=localStorage.getItem("language"),e="load_text_title_en_png";t&&(e="zhtw"==t?"load_text_title_zh_png":e);var n=this.createBitmapByName("load_Interface_jpg");n.x=0,n.y=0,this.addChild(n);var a=this.createBitmapByName(e);a.x=173,a.y=1100,this.addChild(a);var i=new egret.Sprite;i.x=50,i.y=1450,i.width=960,i.height=90;var o=this.createBitmapByName("load_ditu_png");i.addChild(o),this.progress=this.createBitmapByName("load_pb_png"),this.progress.y=19,this.progress.width=80,this.progress.x=30,i.addChild(this.progress),this.textField=new egret.TextField,i.addChild(this.textField),this.textField.text="1%",this.textField.width=960,this.textField.height=70,this.textField.textAlign="center",this.textField.verticalAlign="middle",this.textField.size=30,this.textField.textColor=16777215,this.addChild(i)},e.prototype.onProgress=function(t,e){var n=t/e;n=.1>n?.1:n,this.progress.width=900*n,this.progress.visible=!0;var a=99>=100*n?100*n:99;this.textField.text=Math.floor(a)+"%"},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e}(egret.Sprite);__reflect(Loading.prototype,"Loading",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),getNetWork().then(function(){getJson().then(function(t){$Content.container.content(),$Content.game.layoutFuns(),getLanStatus()})}),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),t=localStorage.getItem("language"),t||localStorage.setItem("language","zhtw"),[4,RES.loadConfig("resource/loading.res.json","resource/")];case 1:return a.sent(),[4,RES.loadGroup("preload",0)];case 2:return a.sent(),e=new Loading,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 3:return a.sent(),[4,this.loadTheme()];case 4:return a.sent(),[4,RES.loadGroup("preload",0,e)];case 5:return a.sent(),this.stage.removeChild(e),[3,7];case 6:return n=a.sent(),console.error(n),[3,7];case 7:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var a=new eui.Theme("resource/default.thm.json",t.stage);a.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){$Content.container=new Container,this.addChild($Content.container)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,a){function i(t){e.call(a,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(a))}var r=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(a,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(a,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var tr=egret.sys.tr,Game=function(t){function e(){var e=t.call(this)||this;return e.isPlay=!1,e.isGameOver=!1,e.data={approveNum:"0",input:"200",currentNum:"1",round:"1",pot:"0",leftTime:"00:00:00",residueTimes:"30",totalBuyTimes:"30",allowAddTimes:"0",myNum:"0",buyTimes:"0",totalBuy:"0 ODF",inviteBonus:"0 ODF",earnings:"0 ODF",allEarnings:"0 ODF",canBonus:"0 ODF"},e.currentMyNum="0",e.eventData={begin:0,end:0},e.langData=$ZHTW.game,e.intervalIsStart=!1,e.updateData=new egret.Timer(1e3,0),e.overTime=0,e.gainId=0,e.skinName="resource/eui_modules/Game/GameUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.layoutFuns=function(){var t=this;this.invite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showInviteModalFun,this),this.lang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showLanguageModalFun,this),this.faq.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showFaqModalFun,this),this.statistics.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showStatModalFun,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyKeyFun,this),this.withdrawBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.withdrawFun,this),this.alertBg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.closeOutAnimal()},this),setOverTime().then(function(e){e=0>e?0:e,t.overTime=parseInt(e+"")}),getTotalPot().then(function(e){e=Number(e),e>0&&(t.data.pot=e.toString(),$Modal.gameStatistics.data.round.activePot=t.data.pot)}),this.playAnimation(this.btnBling,!0),$gameContractInstance.nCurrentGainId(function(e,n){e?console.log(e):t.data.currentNum=n.toString()}),this.getMyApprove(),this.updateData.addEventListener(egret.TimerEvent.TIMER,this.getData,this),this.updateData.start(),this.updatePlayerData()},e.prototype.getData=function(){var t=this;this.intervalIsStart?this.intervalStart():getIsBegin().then(function(e){e?(t.intervalStart(),t.intervalIsStart=!0):(t.overTime=86400,t.data.leftTime=timestampToMoment(t.overTime))},function(t){console.log("===========",t)})},e.prototype.updatePlayerData=function(){var t=this;$myAddress&&(this.getMyApprove(),$gameContractInstance.getRollInArrayDetail($myAddress,function(e,n){if(e)console.log(e);else{n=n.map(function(t,e){return parseInt(t.toString())});var a=n.length;if(0==a)t.data.residueTimes=t.data.totalBuyTimes,t.data.myNum="0";else{var i=parseInt(t.data.totalBuyTimes);t.data.residueTimes=(i-a>0?i-a:0)+"",t.data.myNum=parseInt(n[0].toString())+"","0"!=t.currentMyNum&&parseInt(t.data.myNum)>parseInt(t.currentMyNum)&&t.playMusic(),t.currentMyNum=t.data.myNum}}}),$myAddress&&getMyKeyProp().then(function(e){if(e[0]){t.data.allowAddTimes=e[2].toString(),t.data.totalBuyTimes=30+parseInt(e[2].toString())+"",t.data.buyTimes=e[5].toString(),t.data.totalBuy=Math.floor(100*parseFloat(web3js.fromWei(e[1].toString())))/100+" ODF";var n=Math.floor(100*parseFloat(web3js.fromWei(e[3].toString())))/100;t.data.earnings=n+" ODF",getMyEtraProp().then(function(e){var n=Math.floor(100*parseFloat(web3js.fromWei(e[5].toString())))/100;t.data.inviteBonus=n+" ODF",$gameContractInstance.allowMoney($myAddress,function(e,n){e?console.log(e):t.data.allEarnings=Math.floor(100*parseFloat(web3js.fromWei(n.toString())))/100+" ODF"}),$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(e,n){e?console.log(e):$gameContractInstance.getCurrentBonusMoney(n,function(e,n){e?console.log(e):t.data.canBonus=Math.floor(100*parseFloat(web3js.fromWei(n.toString())))/100+" ODF"})})}),n>=200?t.data.input="0":t.data.input="200",parseInt(web3js.fromWei(e[1].toString()))>0?$gameContractInstance.getRollInArrayDetail($myAddress,function(e,n){if(e)console.log(e);else{n=n.map(function(t,e){return parseInt(t.toString())});var a=n.length;0==a?(t.earning.visible=!1,t.pToearning.visible=!0,setTimeout(function(){t.isPlay||(t.alertModal.visible=!0,t.outMusic(),t.isPlay=!0,t.playAnimation(t.alertBgBling,!0),setTimeout(function(){t.closeOutAnimal()},1e4))},4e3)):(t.earning.visible=!0,t.pToearning.visible=!1,t.closeOutAnimal())}}):t.closeOutAnimal()}},function(t){console.log(t)}))},e.prototype.intervalStart=function(){var t=this;this.overTime--,this.overTime%300==0&&$gameContractInstance.round(function(e,n){e?console.log("round"+e):(n>1&&!t.isGameOver&&($dragonBonesAnime(2),t.isGameOver=!0),t.data.round=n.toNumber(),$Modal.gameStatistics&&($Modal.gameStatistics.data.currentRound=n.toString()))}),this.overTime%5==0&&$gameContractInstance.nRollIn(function(e,n){e?console.log(e):oldRollId!=n.toString()&&(setOverTime().then(function(e){e>0&&(t.overTime=parseInt(e+""),t.overTime>86400?(t.potLabel.visible=!1,t.readyTime.visible=!0,t.overTime-=86400):(t.potLabel.visible=!0,t.readyTime.visible=!1))}),getTotalPot().then(function(e){e=Number(e),e>0&&(t.data.pot=e.toString(),$Modal.gameStatistics.data.round.activePot=t.data.pot)}),$gameContractInstance.nCurrentGainId(function(e,n){e?console.log(e):n.toNumber()>t.gainId&&(t.data.currentNum=n.toString(),$Modal.gameStatistics.data.stats.currentNum=n.toString(),t.gainId=n.toNumber())}),t.updatePlayerData(),oldRollId=n.toString())}),this.data.leftTime=timestampToMoment(this.overTime),$Modal.gameStatistics.visible&&($Modal.gameStatistics.data.round.drainTime=this.data.leftTime)},e.prototype.closeOutAnimal=function(){this.alertBgBling.stop(),this.isPlay=!0,this.alertModal.visible=!1},e.prototype.getMyApprove=function(){var t=this,e=$myAddress,n=$gameContractInstance.address;$myAddress&&$tokenContractInstance.allowance(e,n,function(e,n){e?console.log("4545"+e):t.data.approveNum=web3js.fromWei(n.toString(),"ether")})},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e.prototype.gameoverAnimation=function(){var t=this;this.gameoverModel.visible=!0,this.gameoverBling.play(),setTimeout(function(){t.playAnimation(t.goTextBling,!0),t.updateData.stop()},1500)},e.prototype.buyKeyFun=function(){var t=this;$showLoading(!0),this.chargeLimit().then(function(e){Number(e)>0&&parseInt(web3js.fromWei(e,"ether"))>=parseInt(t.data.input)?t.chargeBalance().then(function(e){return e=web3js.fromWei(e),$showLoading(!1),Number(e)<parseInt(t.data.input)?void $alert("您的Token余額為"+e+",不足以支付本次煉丹"):void getIsBegin().then(function(e){e?setOverTime().then(function(e){t.directBuy()}):t.directBuy()})}):(console.log("没授权"),$showLoading(!1),$Modal.approve.visible=!0,$Modal.approve.msg=$AlertMsg.buyApprove)},function(t){$showLoading(!1),$alert(t)})},e.prototype.chargeBalance=function(){return new Promise(function(t,e){return $myAddress?void $tokenContractInstance.balanceOf($myAddress,function(n,a){n?e(n):t(a.toString())}):($showLoading(!1),notSignInMetamask(),void e())})},e.prototype.chargeLimit=function(){return new Promise(function(t,e){if(!$myAddress)return $showLoading(!1),notSignInMetamask(),void e("You're not signed into metamask");var n=$myAddress,a=$gameContractInstance.address;$tokenContractInstance.allowance(n,a,function(n,a){n?e(n):t(a.toString())})})},e.prototype.directBuy=function(){var t=this;if(!$myAddress)return void notSignInMetamask();var e=$getQueryIdString(),n="0x0000000000000000000000000000000000000000";console.log("--------addr=----",e),e?(e=window.atob(e),console.log("--------addr-atob=----",e),web3js.isAddress(e)?(n=e,this.rollIn(n)):isNaN(Number(e))?console.log(web3js.fromAscii(e)):$gameContractInstance.playerxID_(e,function(e,a){e?$alert(e):(n=a[0],t.rollIn(n))})):this.rollIn(n)},e.prototype.rollIn=function(t){var e=this;$myAddress==t&&(t="0x0000000000000000000000000000000000000000"),$myAddress&&getMyKeyProp().then(function(n){if(n[2].c.length>=10)return void $alert($AlertMsg.isQueue);var a=web3js.toWei(e.data.input,"ether");console.log(t,a),setTimeout(function(){e.btnLight.visible=!1,e.btnBling.stop()},1e3),$gameContractInstance.coinRollIn(t,a,{from:$myAddress,gasPrice:9e9},function(t,e){t&&console.log(t),console.log(e),(t&&t.hash||e)&&($dragonBonesAnime(1),setTimeout(function(){$alert($AlertMsg.alreadyBuy),setTimeout(function(){$Modal.gameAlert.visible=!1},3e3)},6e3))})},function(t){console.log(t)})},e.prototype.withdrawFun=function(){if($myAddress){if($showLoading(!0),"0 ODF"==this.data.allEarnings)return $showLoading(!1),void $alert($AlertMsg.zeroBalance);$gameContractInstance.withDraw({from:$myAddress,gasPrice:9e9},function(t,e){$showLoading(!1),t&&console.log(t),console.log(e),(t&&t.hash||e)&&($dragonBonesAnime(4),setTimeout(function(){$alert($AlertMsg.alreadyBuy),setTimeout(function(){$Modal.gameAlert.visible=!1},3e3)},4e3))})}else notSignInMetamask()},e.prototype.showInviteModalFun=function(){var t=this;$showLoading(!0),this.chargeLimit().then(function(e){Number(e)>0&&parseInt(web3js.fromWei(e,"ether"))>=2?$myAddress?$gameContractInstance.playerIsRegi($myAddress,function(e,n){e?(console.log(e),$alert(e),$showLoading(!1)):(n?($showLoading(!1),$Modal.register.registerGroup.visible=!1,$Modal.register.linkGroup.visible=!0,$Modal.register.getUrl()):t.chargeBalance().then(function(t){return t=web3js.fromWei(t),$showLoading(!1),Number(t)<2?void $alert("您的Token余額為"+t+",不足以支付本次购买推荐人"):($Modal.register.registerGroup.visible=!0,void($Modal.register.linkGroup.visible=!1))
}),$modalShowEvent($Modal.register,205))}):($Modal.register.registerGroup.visible=!0,$Modal.register.linkGroup.visible=!1,$modalShowEvent($Modal.register,205)):(console.log("没授权"),$showLoading(!1),$Modal.approve.visible=!0,$Modal.approve.msg=$AlertMsg.inviteApprove)},function(t){$showLoading(!1),$alert(t)})},e.prototype.showLanguageModalFun=function(){$modalShowEvent($Modal.language,205)},e.prototype.showFaqModalFun=function(){$modalShowEvent($Modal.gameHelp,205)},e.prototype.showStatModalFun=function(){$Modal.gameStatistics.getExtractList(),$Modal.gameStatistics.getTeamTotalPot(),$modalShowEvent($Modal.gameStatistics,205)},e.prototype.playMusic=function(){var t=this;this.sound=new egret.Sound,this.sound.addEventListener(egret.Event.COMPLETE,function(e){var n=t.soundChannel;return n?(n.stop(),void(t.soundChannel=null)):(n=t.sound.play(0,1),n.addEventListener(egret.Event.SOUND_COMPLETE,function(){console.log("onSoundComplete")},t),void(t.soundChannel=n))},this),this.sound.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("loaded error!")},this),this.sound.load("resource/assets/music/Win.mp3")},e.prototype.outMusic=function(){var t=this,e=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(n){var a=t.outChannel;return a?(a.stop(),void(t.outChannel=null)):(a=e.play(0,1),a.addEventListener(egret.Event.SOUND_COMPLETE,function(){console.log("out music onSoundComplete")},t),void(t.outChannel=a))},this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log("out music loaded error!")},this),e.load("resource/assets/music/out.mp3")},e}(eui.Component);__reflect(Game.prototype,"Game");var $Modal={help:null,statistics:null,gameStatistics:null,gameHelp:null,register:null,gameAlert:null,language:null,approve:null,buyLoading:null,ainimeBg:null},$Content={container:null,game:null,armature:null,armatureDisplay:null},tabStatus=0,oldRollId="0",Web3,web3,web3js,$gameContract,$tokenContract,$tokenContractInstance,$gameContractInstance,$myAddress,ClipboardJS;setInterval(getNetWork,3e4);var ApproveTs=function(t){function e(){var e=t.call(this)||this;return e.msg="进行炼丹需要ODF\n现在将为你授权10000 ODF！\n",e.skinName="resource/eui_modules/Modal/GameApprove.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.submitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=web3js.toWei("10000");$tokenContractInstance.approve($gameContractInstance.address,t,{from:$myAddress},function(t,e){t&&console.log(t),console.log(e),setTimeout(function(){$Modal.approve.visible=!1,e&&($alert($AlertMsg.alreadyBuy),setTimeout(function(){$Modal.gameAlert.visible=!1},3e3));var t=setInterval(function(){"0"==$Content.game.data.approveNum?$Content.game.getMyApprove():clearInterval(t)},1500)},1500)}),setTimeout(function(){e.closeFun()},5e3)},this)},e.prototype.closeFun=function(){$Modal.approve.visible=!1},e}(eui.Component);__reflect(ApproveTs.prototype,"ApproveTs");var BuyingTs=function(t){function e(){var e=t.call(this)||this;return e.msg="",e.skinName="resource/eui_modules/Modal/BuyingUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.playAnimation()},e.prototype.playAnimation=function(){egret.Tween.get(this.icon,{loop:!0}).to({rotation:0},0).to({rotation:360},1e3).call(function(){})},e}(eui.Component);__reflect(BuyingTs.prototype,"BuyingTs");var ExtractUnitTs=function(t){function e(){var e=t.call(this)||this;return e.allLen=0,e.sourceArr=[],e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.getData=function(){var t=this;this.allLen=0,this.sourceArr.length=0,this.$children.length=0,$myAddress&&$gameContractInstance.getRollInArrayDetail($myAddress,function(e,n){if(e)console.log(e);else{n=n.map(function(t,e){return parseInt(t.toNumber())});var a=n.length;if(t.allLen=a,t.sourceArr.length=0,a>0){for(var i=0;a>i;i++)if(n[i]>=$Modal.gameStatistics.data.stats.currentNum){var o={num:n[i],extractCoin1:"0"};t.sourceArr.push(o)}t.getList()}}})},e.prototype.getList=function(){var t=this;$myAddress&&getMyKeyProp().then(function(e){if(t.sourceArr.length<1)return void(t.$children.length=0);t.sourceArr[0].extractCoin1=parseFloat(web3js.fromWei(e[4].toString())).toFixed(0)+"e",t.sourceArr.length=t.allLen<=t.sourceArr.length?t.allLen:t.sourceArr.length;var n=new eui.ArrayCollection(t.sourceArr),a=new eui.DataGroup;a.dataProvider=n;var i=localStorage.getItem("language"),o="zhtw"===i?"statistics_text_wdxh":"statistics_text_wdxh_en";a.itemRendererSkinName='<?xml version="1.0" encoding="utf-8"?>\n            <e:Skin class="ExtractUnit" width="900" height="184.55" xmlns:e="http://ns.egret.com/eui">\n                <e:Image source="statistics_bg" horizontalCenter="0" verticalCenter="0"/>\n                <e:Image x="86.42" source="'+o+'" verticalCenter="0"/>\n                <e:BitmapLabel scaleX="1" scaleY="1" anchorOffsetX="0" width="249.33" textAlign="center" anchorOffsetY="0" height="89.09" verticalCenter="0.22499999999999432" font="time_num_fnt" verticalAlign="middle" text="{data.num}" horizontalCenter="0"/>\n                </e:Skin>',t.$children.length=0,t.addChild(a)})},e}(eui.Scroller);__reflect(ExtractUnitTs.prototype,"ExtractUnitTs");var GameAlert=function(t){function e(){var e=t.call(this)||this;return e.msg="",e.skinName="resource/eui_modules/Modal/GameAlertUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.submitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},e.prototype.closeFun=function(){$Modal.gameAlert.visible=!1},e}(eui.Component);__reflect(GameAlert.prototype,"GameAlert");var GameHelp=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.game,e.skinName="resource/eui_modules/Modal/GameHelpUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.layout(),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},e.prototype.closeFun=function(){$closeModalFun($Modal.gameHelp,-1360)},e.prototype.layout=function(){var t=new eui.VerticalLayout;t.gap=50,t.paddingTop=30,t.horizontalAlign=egret.HorizontalAlign.LEFT,this.layoutGroup.layout=t},e}(eui.Component);__reflect(GameHelp.prototype,"GameHelp");var GameStatistics=function(t){function e(){var e=t.call(this)||this;return e.data={currentRound:"1",round:{drainTime:"24:00:00",activePot:"0e"},stats:{currentNum:"0",rewards:"0e"}},e.status=0,e.skinName="resource/eui_modules/Game/GameStatisticsUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.closeBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.tab1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectTab.bind(this,0),this),this.tab2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectTab.bind(this,1),this),this.tab3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectTab.bind(this,2),this),this.tab4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectTab.bind(this,3),this),this.unit=new ExtractUnitTs,this.teamTabScr.addChild(this.unit),this.luckyUnit=new LuckyUnitTs,this.luckyTabScr.addChild(this.luckyUnit)},e.prototype.getExtractList=function(){this.unit.getData(),this.luckyUnit.getData()},e.prototype.getTeamTotalPot=function(){var t=this;$gameContractInstance.teamPot(function(e,n){e?console.log("++++++",e):t.data.stats.rewards=(.9*parseFloat(web3js.fromWei(n[0]).toString())).toFixed(0)+"e"})},e.prototype.closeFun=function(){$closeModalFun($Modal.gameStatistics,-1360)},e.prototype.selectTab=function(t){t!==this.status&&(0===t&&(this.tabBg1.source="btn_statistics",this.tabAct1.source="statistics_text_round_zh",this.tabActEn1.source="statistics_text_round_en",this.tabBitmap1.font="static_round_gold_fnt",this.tabBg2.source="btn_statistics_teams",this.tabAct2.source="statistics_text_stats1_zh",this.tabActEn2.source="statistics_text_stats1_en",this.tabBitmap2.font="static_round_fnt",this.tabBg3.source="btn_statistics_teams",this.tabAct3.source="statistics_text_teams1_zh",this.tabActEn3.source="statistics_text_teams1_en",this.tabBitmap3.font="static_round_fnt",this.tabBg4.source="btn_statistics_teams",this.tabAct4.source="statistics_text_rank1_zh",this.tabActEn4.source="statistics_text_rank1_en",this.roundTab.visible=!0,this.statsTab.visible=!1,this.teamsTab.visible=!1,this.luckyTab.visible=!1),1===t&&(this.tabBg1.source="btn_statistics_teams",this.tabAct1.source="statistics_text_round1_zh",this.tabActEn1.source="statistics_text_round1_en",this.tabBitmap1.font="static_round_fnt",this.tabBg2.source="btn_statistics",this.tabAct2.source="statistics_text_stats_zh",this.tabActEn2.source="statistics_text_stats_en",this.tabBitmap2.font="static_round_gold_fnt",this.tabBg3.source="btn_statistics_teams",this.tabAct3.source="statistics_text_teams1_zh",this.tabActEn3.source="statistics_text_teams1_en",this.tabBitmap3.font="static_round_fnt",this.tabBg4.source="btn_statistics_teams",this.tabAct4.source="statistics_text_rank1_zh",this.tabActEn4.source="statistics_text_rank1_en",this.roundTab.visible=!1,this.statsTab.visible=!0,this.teamsTab.visible=!1,this.luckyTab.visible=!1),2===t&&(this.tabBg1.source="btn_statistics_teams",this.tabAct1.source="statistics_text_round1_zh",this.tabActEn1.source="statistics_text_round1_en",this.tabBitmap1.font="static_round_fnt",this.tabBg2.source="btn_statistics_teams",this.tabAct2.source="statistics_text_stats1_zh",this.tabActEn2.source="statistics_text_stats1_en",this.tabBitmap2.font="static_round_fnt",this.tabBg3.source="btn_statistics",this.tabAct3.source="statistics_text_teams_zh",this.tabActEn3.source="statistics_text_teams_en",this.tabBitmap3.font="static_round_gold_fnt",this.tabBg4.source="btn_statistics_teams",this.tabAct4.source="statistics_text_rank1_zh",this.tabActEn4.source="statistics_text_rank1_en",this.roundTab.visible=!1,this.statsTab.visible=!1,this.teamsTab.visible=!0,this.luckyTab.visible=!1),3===t&&(this.tabBg1.source="btn_statistics_teams",this.tabAct1.source="statistics_text_round1_zh",this.tabActEn1.source="statistics_text_round1_en",this.tabBitmap1.font="static_round_fnt",this.tabBg2.source="btn_statistics_teams",this.tabAct2.source="statistics_text_stats1_zh",this.tabActEn2.source="statistics_text_stats1_en",this.tabBitmap2.font="static_round_fnt",this.tabBg3.source="btn_statistics_teams",this.tabAct3.source="statistics_text_teams1_zh",this.tabActEn3.source="statistics_text_teams1_en",this.tabBitmap3.font="static_round_fnt",this.tabBg4.source="btn_statistics",this.tabAct4.source="statistics_text_rank_zh",this.tabActEn4.source="statistics_text_rank_en",this.roundTab.visible=!1,this.statsTab.visible=!1,this.teamsTab.visible=!1,this.luckyTab.visible=!0),this.status=t)},e}(eui.Component);__reflect(GameStatistics.prototype,"GameStatistics");var LanguageTs=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_modules/Modal/LanguageUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.closeBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.langZHTW.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLang.bind(this,"zhtw"),this),this.langEN.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLang.bind(this,"en"),this)},e.prototype.closeFun=function(){$closeModalFun($Modal.language,-1360)},e.prototype.chooseLang=function(t){langStatus!==t&&(setLanguageModalState(t),langStatus=t,changeLang(t),localStorage.setItem("language",t))},e}(eui.Component);__reflect(LanguageTs.prototype,"LanguageTs");var LuckyUnitTs=function(t){function e(){var e=t.call(this)||this;return e.sourceArr=[],e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.getData=function(){var t=this;this.sourceArr.length=0,this.$children.length=0,$gameContractInstance.luckyPlayerMoney(function(e,n){e?console.log("playerxID_:",e):(t.luckMoney=web3js.fromWei(n,"ether").toNumber(),t.getLuckyAddress(0))})},e.prototype.getLuckyAddress=function(t){var e=this;$gameContractInstance.luckyer(t,function(n,a){if(n);else{if(0==a.toNumber())return;$gameContractInstance.playerxID_(a,function(a,i){if(n)console.log("playerxID_:",n);else{var o={extractCoin1:e.luckMoney,address:i[0]};e.sourceArr.push(o),t++,e.getLuckyAddress(t),e.getList()}})}})},e.prototype.getList=function(){if(this.sourceArr.length<1)return void(this.$children.length=0);var t=new eui.ArrayCollection(this.sourceArr),e=new eui.DataGroup;e.dataProvider=t,e.itemRendererSkinName='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="ExtractUnit" width="900" height="266" xmlns:e="http://ns.egret.com/eui">\n	<e:Image verticalCenter="31" horizontalCenter="0" source="statistics_bg" anchorOffsetY="0" height="246"/>\n	<e:BitmapLabel scaleX="1" scaleY="1" anchorOffsetX="0" textAlign="right" anchorOffsetY="0" height="89.09" verticalAlign="middle" text="{data.extractCoin1}" horizontalCenter="0.5" font="statistics_bold_fnt" verticalCenter="31.5"/>\n	<e:Label text="{data.address}" y="31.35" anchorOffsetX="0" horizontalCenter="1.5" textColor="0x4b281f" bold="true"/>\n</e:Skin>',this.$children.length=0,this.addChild(e)},e}(eui.Scroller);__reflect(LuckyUnitTs.prototype,"LuckyUnitTs");var Register=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.game,e.data={idUrl:"",addrUrl:""},e.skinName="resource/eui_modules/Modal/RegisterUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.closeBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerBefore,this),this.copyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyUrl.bind(this,"id"),this)},e.prototype.registerBefore=function(){var t=this;$Content.game.chargeLimit().then(function(e){Number(e)>0?t.registerReg():(console.log("没授权"),$Modal.approve.visible=!0)},function(t){$alert(t)})},e.prototype.registerReg=function(){var t=this;if(!$myAddress)return void notSignInMetamask();var e=$getQueryIdString(),n="0x0000000000000000000000000000000000000000";e?(e=window.atob(e),web3js.isAddress(e)?(n=e,this.registerFun(n)):isNaN(Number(e))?(console.log(web3js.fromAscii(e)),$alert("請保持瀏覽器地址後綴為正確链接地址")):$gameContractInstance.playerxID_(e,function(e,a){e?$alert(e):(n=a[0],t.registerFun(n))})):this.registerFun(n)},e.prototype.registerFun=function(t){var e=this;if(console.log(t),$myAddress){var n=web3js.toWei("2");$gameContractInstance.registerName(t,n,{from:$myAddress,gasPrice:1e10},function(t,n){t?console.log(t):(t&&console.log(t),setTimeout(function(){e.closeFun(),(t&&t.hash||n)&&$dragonBonesAnime(3)},2e3))}),setTimeout(function(){e.closeFun()},5e3)}else notSignInMetamask()},e.prototype.copyUrl=function(t){var e=this,n=document.getElementById("copyElement");n||(n=document.createElement("textarea"),n.id="copyElement",document.body.appendChild(n));var a=document.createElement("button");switch(a.setAttribute("id","btnId"),a.setAttribute("data-clipboard-action","copy"),a.setAttribute("data-clipboard-target","#copyElement"),document.body.appendChild(a),t){case"address":n.innerHTML=this.data.addrUrl;break;case"id":n.innerHTML=this.data.idUrl}var i=new ClipboardJS("#btnId",{target:function(){return document.querySelector("#copyElement")}});i.on("success",function(t){$alert($AlertMsg.copySuc),setTimeout(e.closeFun,2e3)}),i.on("error",function(t){$alert("Copy error")}),a.click(),n.setAttribute("readonly","true"),n.style.width="0",n.style.height="0",n.style.opacity="0",a.style.width="0",a.style.height="0",a.style.opacity="0"},e.prototype.getUrl=function(){var t=this;$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(e,n){if(e)$alert(e);else{var a="http://deifiedemperor.io/",i=window.btoa(n.toString());t.data.idUrl=a+"?id="+i}})},e.prototype.closeFun=function(){$closeModalFun($Modal.register,-1360)},e}(eui.Component);__reflect(Register.prototype,"Register");