function changeLang(t){t===$ZHTW.type&&($Content.container.langData=$ZHTW.container,$Content.game.langData=$ZHTW.game,$Modal.gameHelp.langData=$ZHTW.game,$Modal.register.langData=$ZHTW.game,$Modal.buyKey.langData=$ZHTW.game,$Content.game.languageBtn.source="icon_ft_png",$Content.game.langJackPot.source="activepot_zh_png",$Content.game.myAsset.source="yx_text_wdzc_zh_png",$Content.game.predictBonus.source="yx_text_djyc_zh_png",$Content.game.extractNum.source="yx_text_ljcs_zh_png",$Content.game.myNum.source="yx_text_rcmdid_zh_png",$Content.game.currentProf.source="yx_text_tdjl_zh_png",$Content.game.unionProf.source="yx_text_lmjl_zh_png",$Content.game.extractText.source="yx_text_tq_zh_png",$Content.game.showBuyModal.$children[1].source="btn_text_gmyc_zh_png",$Content.game.statisticsBtn.source="icon_tj_png",$Content.game.registerBtn.source="icon_tjzc_png",$Content.game.helpBtn.source="icon_gl_png",$Content.game.alertText.source="special_effects_text_png",$Content.game.roundZh.visible=!0,$Content.game.roundEn.visible=!1,$Content.game.profidImg.source="yx_text_fhsy_zh_png",$Content.game.keyImg.source="yx_text_ljtr_zh_png",$Content.game.totalAsset.source="yx_text_cjxh_zh_png",$Modal.gameStatistics.langTitleImg.source="title_text_statistics_zh_png",$Modal.gameStatistics.langRoundTime.source="statistics_text_cwdi_zh_png",$Modal.gameStatistics.langJackPot.source="activepot_zh_png",$Modal.gameStatistics.totalInvestment.source="statistics_stats_text_ti_zh_png",$Modal.gameStatistics.totalTime.source="statistics_text_rcmdid_zh_png",$Modal.gameStatistics.totalInvestment0.source="statistics_stats_text_dr_zh_png",$Modal.extractUnit.myNumber="yx_text_wdxh_zh_png",$Modal.extractUnit.fenfang="yx_text_fhsy_zh_png",$Modal.gameStatistics.tabAct1.visible=!0,$Modal.gameStatistics.tabAct2.visible=!0,$Modal.gameStatistics.tabAct3.visible=!0,$Modal.gameStatistics.tabActEn1.visible=!1,$Modal.gameStatistics.tabActEn2.visible=!1,$Modal.gameStatistics.tabActEn3.visible=!1,$Modal.refereeInfo.langTitleImg.source="title_text_tjdz_zh_png",$Modal.refereeInfo.langWalletAddr.source="tjdz_text_qbdz_zh_png",$Modal.refereeInfo.langCopyBtn1.source="btn_text_fz_zh_png",$Modal.refereeInfo.langIdAddr.source="tjdz_text_iddz_zh_png",$Modal.refereeInfo.langCopyBtn2.source="btn_text_fz_zh_png",$Modal.register.langTitleImg.source="title_text_tjrzc_zh_png",$Modal.register.langRegisterBtn.source="btn_text_zc_zh_png",$Modal.gameHelp.langTitleImg.source="title_text_strategy_zh_png",$Modal.buyKey.totalTitle.source="gmys_text_yys_zh_png",$AlertMsg=$ZHTW.msg),t===$EN.type&&($Content.container.langData=$EN.container,$Content.game.langData=$EN.game,$Modal.gameHelp.langData=$EN.game,$Modal.register.langData=$EN.game,$Modal.buyKey.langData=$EN.game,$Content.game.languageBtn.source="icon_ft_en_png",$Content.game.langJackPot.source="activepot_en_png",$Content.game.myAsset.source="yx_text_wdzc_en_png",$Content.game.predictBonus.source="yx_text_djyc_en_png",$Content.game.extractNum.source="yx_text_ljcs_en_png",$Content.game.myNum.source="yx_text_rcmdid_en_png",$Content.game.currentProf.source="yx_text_tdjl_en_png",$Content.game.unionProf.source="yx_text_lmjl_en_png",$Content.game.extractText.source="yx_text_tq_en_png",$Content.game.showBuyModal.$children[1].source="gmys_text_en_png",$Content.game.statisticsBtn.source="icon_tj_en_png",$Content.game.registerBtn.source="icon_tjzc_en_png",$Content.game.helpBtn.source="icon_gl_en_png",$Content.game.alertText.source="special_effects_text_en_png",$Content.game.roundZh.visible=!1,$Content.game.roundEn.visible=!0,$Content.game.profidImg.source="yx_text_fhsy_en_png",$Content.game.keyImg.source="yx_text_ljtr_en_png",$Content.game.totalAsset.source="yx_text_cjxh_en_png",$Modal.gameStatistics.langTitleImg.source="title_text_statistics_en_png",$Modal.gameStatistics.langRoundTime.source="statistics_text_cwdi_en_png",$Modal.gameStatistics.langJackPot.source="activepot_en_png",$Modal.gameStatistics.totalInvestment.source="statistics_stats_text_ti_en_png",$Modal.gameStatistics.totalTime.source="statistics_text_rcmdid_en_png",$Modal.gameStatistics.totalInvestment0.source="statistics_stats_text_dr_en_png",$Modal.extractUnit.myNumber="yx_text_wdxh_en_png",$Modal.extractUnit.fenfang="yx_text_fhsy_en_png",$Modal.gameStatistics.tabAct1.visible=!1,$Modal.gameStatistics.tabAct2.visible=!1,$Modal.gameStatistics.tabAct3.visible=!1,$Modal.gameStatistics.tabActEn1.visible=!0,$Modal.gameStatistics.tabActEn2.visible=!0,$Modal.gameStatistics.tabActEn3.visible=!0,$Modal.refereeInfo.langTitleImg.source="title_text_tjrzc_en_png",$Modal.refereeInfo.langWalletAddr.source="tjdz_text_qbdz_en_png",$Modal.refereeInfo.langCopyBtn1.source="btn_text_fz_en_png",$Modal.refereeInfo.langIdAddr.source="tjdz_text_iddz_en_png",$Modal.refereeInfo.langCopyBtn2.source="btn_text_fz_en_png",$Modal.register.langTitleImg.source="title_text_tjrzc_en_png",$Modal.register.langRegisterBtn.source="btn_text_zc_en_png",$Modal.gameHelp.langTitleImg.source="title_text_strategy_en_png",$Modal.buyKey.totalTitle.source="gmys_text_yys_en_png",$AlertMsg=$EN.msg)}function getLanStatus(){var t=localStorage.getItem("language");t&&(langStatus=t,changeLang(t),setLanguageModalState(langStatus))}function setLanguageModalState(t){t===$ZHTW.type&&($Modal.language.title.source="yuyan_text_zh_png",$Modal.language.langZHTW_choosed.visible=!0,$Modal.language.langEN_choosed.visible=!1),t===$EN.type&&($Modal.language.title.source="yuyan_text_en_png",$Modal.language.langZHTW_choosed.visible=!1,$Modal.language.langEN_choosed.visible=!0)}function setHLayoutLeft(){var t=new eui.HorizontalLayout;return t.gap=20,t.horizontalAlign=egret.HorizontalAlign.LEFT,t}function getNetWork(){return new Promise(function(t){"undefined"!=typeof web3?web3.version.getNetwork(function(e,n){switch(n){case"1":web3js=new Web3(web3.currentProvider),$myAddress=web3js.eth.accounts[0];var a=setInterval(function(){$myAddress=web3js.eth.accounts[0],$myAddress||clearInterval(a)},2e3);t();break;default:web3js=new Web3(new Web3.providers.HttpProvider(netLink)),t()}}):(web3js=new Web3(new Web3.providers.HttpProvider(netLink)),t())})}function getJson(){return new Promise(function(t,e){fetch("contract/miracle.json",{method:"GET",headers:new Headers({"Content-Type":"application/json"})}).then(function(t){return t.json()},function(t){e(t)}).then(function(e){$gameContract=web3js.eth.contract(e.abi),$gameContractInstance=$gameContract.at("0xd823b5d18542506638b7cae1be63df7f8255c98f"),t($tokenContractInstance)})})}function timestampToTime(t){t=10===t.length?1e3*t:1*t;var e=new Date(t),n=e.getFullYear()+".",a=fillZero(e.getMonth()+1)+".",o=fillZero(e.getDate())+" ",r=fillZero(e.getHours())+":",i=fillZero(e.getMinutes())+":",s=fillZero(e.getSeconds());return n+a+o+r+i+s}function fillZero(t){return t=10>t?"0"+t:t}function timestampToMoment(t){t=0>t?0:t;var e=fillZero(Math.floor(t/60/60))+":",n=fillZero(Math.floor(t/60%60))+":",a=fillZero(t%60);return e+n+a}function setOverTime(){return new Promise(function(t,e){getBjTime().then(function(n){$gameContractInstance.overMoment(function(a,o){if(a)e(a);else{var r=o.toString();t(r-Number(n)/1e3)}})})})}function getBjTime(){return new Promise(function(t,e){var n=Date.parse((new Date).toString());t(n)})}function getTotalPot(){return new Promise(function(t,e){$gameContractInstance.getTotalPot(function(n,a){n?e(n):t(web3js.fromWei(a))})})}function getEthXUSDrate(){return new Promise(function(t,e){t("200")})}function getMyKeyProp(){return new Promise(function(t,e){$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(n,a){n?e(n):$gameContractInstance.playerxID_(a,function(n,a){n?e(n):t(a)})})})}function getMyEtraProp(){return new Promise(function(t,e){$myAddress&&$gameContractInstance.pIDxAddr_($myAddress,function(n,a){n?e(n):$myAddress&&$gameContractInstance.playerEtraxAddr_(a.toString(),function(n,a){n?e(n):t(a)})})})}function getIsBegin(){return new Promise(function(t,e){$gameContractInstance.isBegin(function(n,a){n?($alert("网络错误"),e(n)):t(a)})})}function $alert(t){0===tabStatus&&($Modal.gameAlert.msg=t,$Modal.gameAlert.visible=!0,$Modal.betLoad.visible=!1)}function notSignInMetamask(){$alert("You're not signed into metamask")}function netWorkError(){$alert("Network Error")}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,r){function i(t){try{l(a.next(t))}catch(e){r(e)}}function s(t){try{l(a["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}l((a=a.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return a([t,e])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,r=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(a){n=[6,a],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BetLoading=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_modules/Game/BetLoadingUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.operation()},e.prototype.operation=function(){this.visible=!1,this.playAnimation(this.loop,!0)},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e}(eui.Component);__reflect(BetLoading.prototype,"BetLoading");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function a(a){e.call(n,a,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?a(o):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Container=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.container,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.content=function(){$Content.game=new Game,this.addChild($Content.game),$Modal.gameStatistics=new GameStatistics,$Modal.gameStatistics.visible=!1,this.addChild($Modal.gameStatistics),$Modal.gameHelp=new GameHelp,$Modal.gameHelp.visible=!1,this.addChild($Modal.gameHelp),$Modal.register=new Register,$Modal.register.visible=!1,this.addChild($Modal.register),$Modal.refereeInfo=new RefereeInfo,$Modal.refereeInfo.visible=!1,this.addChild($Modal.refereeInfo),$Modal.extract=new ExtractTs,$Modal.extract.visible=!1,this.addChild($Modal.extract),$Modal.language=new Language,$Modal.language.visible=!1,this.addChild($Modal.language),$Modal.buyKey=new BuyKey,$Modal.buyKey.visible=!1,this.addChild($Modal.buyKey),$Modal.gameAlert=new GameAlert,$Modal.gameAlert.visible=!1,this.addChild($Modal.gameAlert),$Modal.betLoad=new BetLoading,$Modal.betLoad.visible=!1,this.addChild($Modal.betLoad)},e}(eui.Component);__reflect(Container.prototype,"Container");var Language=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_modules/LanguageUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.langZHTW.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLang.bind(this,"zhtw"),this),this.langEN.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseLang.bind(this,"en"),this)},e.prototype.clostFun=function(){var t=$Modal.language.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.language.visible=!1,e=null})},e.prototype.chooseLang=function(t){langStatus!==t&&(setLanguageModalState(t),langStatus=t,changeLang(t),localStorage.setItem("language",t))},e}(eui.Component);__reflect(Language.prototype,"Language");var $warn=egret.$warn,$ZHTW={type:"zhtw",container:{game:"遊戲"},game:{readyTime:"準備時間",bear_team_title:"死侍戰隊",cow_team_title:"鳳凰女戰隊",snake_team_title:"金剛狼戰隊",whale_team_title:"萬磁王戰隊",remind_1:"滑動或點擊箭頭選擇壹個隊伍",register_info_2:"",register_info_3:"",register_info_4:"玩家可在本页面转0.02个ETH生成自己的推广链接",register_info_5:"",panalTips1:"同時最多可投放 30 次，每次 1 ETH",panalTips2:"剩余投放次數:",help_text_1:"1. 遊戲怎樣結束？",help_text_2:"      遊戲倒計時24小時，玩家每投入1次增加一个小时的遊戲時間，遊戲結束後，最後投入的10名玩家將會獲得獎池中的大獎。",help_text_3:"2. 如何進行ETH投入？",help_text_4:"      ETH投入每次定投1 ETH，投入後本次投入將進入收益序列，每個玩家最多能有30次投入進入收益序列。當你的收益大於1ETH時會自動扣除你的收益進行投入而不是你錢包的餘額。複投10輪，玩家可以提取所有本金。",help_text_5:"3. 如何獲得收益？",help_text_6:"      玩家在遊戲中可申請成為隊長，隊長可將遊戲推薦給其他人，當被推薦人在遊戲中投入ETH後，隊長能獲得最大的直接推薦獎勵。\n如果隊長推薦的玩家投入了ETH，隊長就能提升等級，推薦的玩家越多，隊長等級越高，獲得的推薦人收益也會增加，最高不超過5級。\n隊長等級提升後，其推薦的玩家如果再推薦了其他玩家，隊長也能獲得獎勵，其收益和等級成正比。\n",help_text_7:"4. 如何獲得收益？",help_text_8:"      玩家獲得收益的方法主要分為3類：\nA.	玩家投入ETH後，如果後續有其他人繼續投入，並且當前收益排序輪到了該玩家，該玩家就能獲得收益，當收益等於最大收益時，該玩家出局，下一個收益序列的玩家開始獲得收益，以此不斷迴圈。\nB.	玩家可申請成為隊長，創建連接分享遊戲給其他人，隊長能獲得被推薦人投入ETH的一定比列，詳情見隊長資金分配表\nC.	接收推薦連結的玩家之間會形成聯盟，在聯盟之內的玩家可以得到聯盟獎勵。一個玩家的聯盟內最多能有10個玩家。\nD.	時間結束後，最後投入的10名玩家平分所有獎池獎勵。",help_text_9:"5. 結算獎勵.",help_text_10:"     遊戲時間結束最後10名玩家平分所有獎勵。"},msg:{zeroBalance:"余額為零，不能提現",exceedBalance:"單次下註金額不能大於20ETH",copySuc:"復制成功",errorKey:"請輸入正確key數",errorReg:"格式錯誤！",errInput:"請輸入正確的個數",readyTime:"準備時間，不能購買！",selfReferrer:"不能推薦自己",isQueue:"投注次数大于10，不能投注！",notSufficientFunds:"余额不足，不能投注！"}},$EN={type:"en",container:{game:"GAME"},game:{readyTime:"Ready Time",bear_team_title:"Deadpool",cow_team_title:"Phoenix",snake_team_title:"Wolverine",whale_team_title:"Magneto",remind_1:"Sliding or click a team ",register_info_2:"",register_info_3:"",register_info_4:"Players can go to 0.02 ETH on this page to generate their own promotional links",register_info_5:"",register_info_6:"",register_info_7:"",panalTips1:"You can make up to 30 shots, 1 ETH at every time",panalTips2:"Number of residual inputs:",help_text_1:"1. How does the game end?",help_text_2:"Game Countdown - hours, each player invests 1 Times increased one hour of game time, after the game is over, finally put into the Ten players will be awarded the jackpot in the prize pool.",help_text_3:"2. how to do ETH input?",help_text_4:"ETH devote each time to a fixed investment 1 ETH , the investment will enter the revenue sequence, each player can have up to Thirty input into the revenue sequence. When your earnings are greater than 1ETH , you will automatically deduct your earnings to invest instead of the balance of your wallet. The player can withdraw all the principal.",help_text_5:"3. What's the use of the leader?",help_text_6:"players can apply to be captain in the game, the captain can recommend the game to other people, when the recommended person in the game to put ETH , the captain can get the maximum Direct referral reward.\nIf the player recommended by the captain puts ETH , the captain will be able to raise the level, the more recommended players, the higher the Captain level, the benefit of the referral will be increased, the highest not more than 5 level.\nOnce the captain has been promoted, the recommended player will be rewarded for the bonus, which is proportional to the level of return.\n",help_text_7:"4. How to get benefits?",help_text_8:"the way the player gains revenue is mainly divided into 3 class:\nA. Player Input ETH after that, if someone else continues to invest, and the current revenue sort is on the player, the player will get the benefit when equals maximum benefit, the player is out of the game, and the next profit sequence player starts earning revenue, which keeps cycling.\nB. Players can apply to become captain, create a Connection Sharing game to others, the captain can get the recommended person to put ETH for more details see Captain Fund allocation form\nC. Alliances are formed between players who receive referral links, and players within the league can receive affiliate rewards. A player can have up to ten players in the league .\nD. When the time is over, finally put in Ten players split all prize pool bonuses.\n",help_text_9:"5. Settlement reward.",help_text_10:"Game time is over . finally put in Ten players split all the prize pools."},msg:{zeroBalance:"Balance is zero, cant be cashed out",exceedBalance:"Single bet amount cannot be greater than 20ETH",copySuc:"Copy is successful",errorKey:"Please enter the correct number of keys",errorReg:"Input format is wrong!",errInput:"Please enter the correct number",zeroInput:"The input cannot be zero",readyTime:"Preparation time, cannot be purchased！",selfReferrer:"Don't recommend  yourself",isQueue:"You are still in the queue and cannot be purchased",notSufficientFunds:"not sufficient funds"}},$AlertMsg=$ZHTW.msg,langStatus=$ZHTW.type,Loading=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=localStorage.getItem("language"),e="load_text_title_en_png";t&&(e="zhtw"==t?"load_text_title_zh_png":e);var n=this.createBitmapByName("load_Interface_jpg");n.x=0,n.y=0,this.addChild(n);var a=this.createBitmapByName(e);a.x=450,a.y=160,this.addChild(a);var o=new egret.Sprite;o.x=50,o.y=1450,o.width=960,o.height=90;var r=this.createBitmapByName("load_ditu_png");o.addChild(r),this.progress=this.createBitmapByName("load_pb_png"),this.progress.y=23,this.progress.width=0,this.progress.x=30,o.addChild(this.progress),this.textField=new egret.TextField,o.addChild(this.textField),this.textField.text="1%",this.textField.width=960,this.textField.height=90,this.textField.textAlign="center",this.textField.verticalAlign="middle",this.textField.size=46,this.textField.textColor=16777215,this.addChild(o)},e.prototype.onProgress=function(t,e){var n=t/e;this.progress.width=900*n,this.progress.visible=!0,this.textField.text=Math.floor(99*n)+"%"},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e}(egret.Sprite);__reflect(Loading.prototype,"Loading",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),getNetWork().then(function(){getJson().then(function(e){t.stage.removeChild(t.stage.$children[1]),$Content.container.content(),getLanStatus()})}),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),t=localStorage.getItem("language"),t||localStorage.setItem("language","en"),[4,RES.loadConfig("resource/loading.res.json","resource/")];case 1:return a.sent(),[4,RES.loadGroup("preload",0)];case 2:return a.sent(),e=new Loading,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 3:return a.sent(),[4,this.loadTheme()];case 4:return a.sent(),[4,RES.loadGroup("preload",0,e)];case 5:return a.sent(),[3,7];case 6:return n=a.sent(),console.error(n),[3,7];case 7:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var a=new eui.Theme("resource/default.thm.json",t.stage);a.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){$Content.container=new Container,this.addChild($Content.container)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,a){function o(t){e.call(a,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(a))}var i=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(a,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(a,generateEUI2)},i)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var $Modal={help:null,statistics:null,gameStatistics:null,gameHelp:null,register:null,refereeInfo:null,gameAlert:null,language:null,buyKey:null,extract:null,extractUnit:null,betLoad:null},$Content={container:null,game:null},tabStatus=0,Web3,web3,web3js,$gameContract,$tokenContractInstance,$gameContractInstance,$myAddress,ClipboardJS,netLink="https://mainnet.infura.io/",BuyKey=function(t){function e(){var e=t.call(this)||this;return e.data={input:"1",exchangeRate:0,choosedTeam:2,tips:"Key prices will increase slowly, subject to transaction price.",myAllBuy:"0"},e.langData=$ZHTW.game,e.skinName="resource/eui_modules/Game/BuyKeyModal.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.closeModal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeModalFun,this),this.inputText.addEventListener(egret.FocusEvent.CHANGE,this.onChange,this),this.inputText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.focusOut,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buyKeyFun,this),this.addInput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addFun,this),this.minuInput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.minusFun,this)},e.prototype.buyKeyFun=function(){var t=this;$Modal.betLoad.visible=!0,getIsBegin().then(function(e){e?setOverTime().then(function(e){t.directBuy()}):t.directBuy()})},e.prototype.directBuy=function(){var t=this;if(!$myAddress)return void notSignInMetamask();var e=location.href,n=e.split("?")[1],a="0x0000000000000000000000000000000000000000";n?web3js.isAddress(n)?(a=n,this.rollIn(a)):isNaN(Number(n))?(console.log(web3js.fromAscii(n)),console.log("請保持瀏覽器地址後綴為正確的賬戶地址或id"),$alert("請保持瀏覽器地址後綴為正確的賬戶地址或id")):$gameContractInstance.returnAgent($myAddress,function(e,o){if(e)$alert(e);else{var r=o[9].toString();r="0"!=r?r:n,$gameContractInstance.playerxID_(r,function(e,n){e?$alert(e):(a=n[0],t.rollIn(a))})}}):this.rollIn(a)},e.prototype.rollIn=function(t){var e=this;$myAddress==t&&(t="0x0000000000000000000000000000000000000000"),$myAddress&&getMyKeyProp().then(function(n){return n[2].c.length>=10?void $alert($AlertMsg.isQueue):(console.log(web3js.toWei(e.data.input,"ether")),void web3js.eth.getBalance($myAddress,function(n,a){if(n)return $alert("网络错误"),void console.log(n);var o=parseFloat(web3js.fromWei(a,"ether"));return o<parseInt(e.data.input)?void $alert($AlertMsg.notSufficientFunds):void $gameContractInstance.coinRollIn(t,{from:$myAddress,value:web3js.toWei(e.data.input,"ether")},function(t,n){t?($alert(t),console.log(t)):$alert("请耐心等待交易完成"),console.log(n),setTimeout(function(){e.closeModalFun()},2e3)})}))},function(t){$alert("网络错误"),console.log(t)})},e.prototype.onChange=function(t){this.data.input=t.target.text.replace(/[^\d]/g,"")},e.prototype.focusOut=function(t){var e=t.target.text.replace(/[^\d]/g,"");e=e>10?10:e,e=2>e?2:e,t.target.text=e,this.data.input=e,this.data.input||(this.data.input="1")},e.prototype.minusFun=function(){var t=Number(this.data.input);t>2&&(t--,this.data.input=String(t))},e.prototype.addFun=function(){var t=Number(this.data.input);t>=10||(t++,this.data.input=String(t))},e.prototype.closeModalFun=function(){var t=this,e=this.$children[1],n=egret.Tween.get(e);n.to({y:1716},200).call(function(){t.visible=!1,n=null})},e}(eui.Component);__reflect(BuyKey.prototype,"BuyKey");var ExtractTs=function(t){function e(){var e=t.call(this)||this;return e.data={lockdown:"0",scam:"0",advice:"0",total:"0",tatalUSD:"0"},e.skinName="resource/eui_modules/Game/ExtractUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.drawBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.drawFun,this)},e.prototype.clostFun=function(){var t=$Modal.extract.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.extract.visible=!1,e=null})},e.prototype.drawFun=function(){$Modal.betLoad.visible=!0,$myAddress?$gameContractInstance.withDraw({from:$myAddress},function(t,e){if(t)$alert(t),console.log(t);else{$alert("请耐心等待交易完成");var n=setInterval(function(){$Content.game.updatePlayerData().then(function(){clearInterval(n),n=null})},3e3)}}):notSignInMetamask()},e.prototype.watchDrawKey=function(){var t=$gameContractInstance.onWithdraw();t.watch(function(e,n){e?console.log(e):console.log(n),t.stopWatching()})},e}(eui.Component);__reflect(ExtractTs.prototype,"ExtractTs");var ExtractUnitTs=function(t){function e(){var e=t.call(this)||this;return e.allLen=0,e.sourceArr=[],e.sourceArrObj=[],e.myNumber="yx_text_wdxh_en_png",e.fenfang="yx_text_fhsy_zh_png",e.nRollIn=2,e.nGainId=1,e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.getData=function(){var t=this;this.sourceArr.length=0,this.$children.length=0,$myAddress&&$gameContractInstance.getRollInArrayDetail($myAddress,function(e,n){e?t.ifError():(t.allLen=n.length,t.sourceArrObj=n,t.sourceArrObj.forEach(function(t){return t.toString()}),t.allLen>0&&$gameContractInstance.nRollIn(function(e,n){e?t.ifError():(t.nRollIn=n.toNumber(),$gameContractInstance.nCurrentGainId(function(e,n){e?t.ifError():(t.nGainId=n.toNumber(),t.getQueueId(0))}))}))})},e.prototype.getQueueId=function(t){var e={extractNum:this.sourceArrObj[t].toNumber()-this.nGainId,extractCoin1:"0",per:0,car:"car"+(this.sourceArr.length+1)+"_png",myNumber:this.myNumber,fenfang:this.fenfang};if(this.sourceArr.length>5){var n=parseInt(6*Math.random()+"")+1;e.car="car"+n+"_png"}if(1!=this.nGainId){var a=this.nRollIn-this.nGainId;a=0>=a?1:a;var o=a-(this.sourceArrObj[t].toNumber()-this.nGainId);o=0>=o?1:o,o=o>a?a:o,e.per=o/a*904,e.per=e.per>850?850:e.per}e.extractNum>50&&(e.extractNum="***"),this.sourceArr[t]=e,t<this.allLen-1?(t++,this.getQueueId(t)):this.getList()},e.prototype.getList=function(){var t=this;getMyKeyProp().then(function(e){if(0!=t.sourceArr.length){t.sourceArr[0].extractCoin1=parseFloat(web3js.fromWei(e[4].toString())).toFixed(2);var n=new eui.ArrayCollection(t.sourceArr),a=new eui.DataGroup;a.dataProvider=n,a.itemRendererSkinName='<?xml version="1.0" encoding="utf-8"?>\n                <e:Skin class="ExtractUnit" width="970" height="280" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" xmlns:tween="egret.tween.*">\n                    <w:Declarations>\n                    </w:Declarations>\n                    <e:Image scaleX="1" scaleY="1" verticalCenter="0" source="car_bg_png" horizontalCenter="0"/>\n                    <e:BitmapLabel scaleX="1" scaleY="1" verticalCenter="-47" anchorOffsetX="0" width="223.57" textAlign="left" horizontalCenter="-126" anchorOffsetY="0" height="86.06" font="game_modal_num_100_fnt" text="{data.extractNum}"/>\n                    <e:Image source="{data.myNumber}" x="50.78" y="57.81"/>\n                    <e:Image x="532.92" y="57.81" source="{data.fenfang}"/>\n                    <e:BitmapLabel scaleX="1" scaleY="1" anchorOffsetX="0" width="249.33" textAlign="left" anchorOffsetY="0" height="89.09" x="691.54" y="49.71" font="game_modal_num_100_fnt" text="{data.extractCoin1}"/>\n                    <e:Group width="903.99" height="90.85" y="161.54" anchorOffsetX="0" anchorOffsetY="0" horizontalCenter="0" maxWidth="903.99" scrollEnabled="true">\n                        <e:Image id="carLine" source="car_line_png" verticalCenter="12.575000000000003" left="0"/>\n                        <e:Group id="carGroup" width="185.33" height="53.34" x="{data.per}" y="1.33" anchorOffsetY="0" anchorOffsetX="0">\n                            <e:Image verticalCenter="17.33" y="-10.330000000000013" scaleX="1" scaleY="1" horizontalCenter="0.33499999999999375" source="{data.car}"/>\n                            <e:Image id="wheelL" source="car_front_wheel_png" x="147.55" y="20.2" anchorOffsetX="14" anchorOffsetY="14" visible="false"/>\n                            <e:Image id="wheelR" source="car_rear_wheel_png" x="32.72" y="19.28" anchorOffsetX="16" anchorOffsetY="16" visible="false"/>\n                        </e:Group>\n                    </e:Group>\n                </e:Skin>',t.addChild(a),setTimeout(function(){var t=a.$children.length;if(t>0)for(var e=function(t){var e=a.$children[t].wheelL,n=a.$children[t].wheelR,o=a.$children[t].carLine;egret.Tween.get(e,{loop:!0}).to({rotation:0},0).to({rotation:360},1e3),egret.Tween.get(n,{loop:!0}).to({rotation:0},0).to({rotation:360},1e3),egret.Tween.get(o,{loop:!0}).to({left:0},0).to({left:-904},6e3).call(function(){o.x=0})},n=0;t>n;n++)e(n)},100)}},function(e){t.ifError()})},e.prototype.ifError=function(){$alert("网络异常，请尝试重新打开统计界面")},e}(eui.Scroller);__reflect(ExtractUnitTs.prototype,"ExtractUnitTs");var Game=function(t){function e(){var e=t.call(this)||this;return e.data={totalInvest:"0",totalInvestUsd:"0",roundNum:"",jackpot:"e0",jackpotUs:"0",timeRemaining:"00:00:00",choosedTeam:2,input:"1",exchangeRate:0,remainingBet:"30",moduleData:{rcmdid:"0",allTime:"0",allBuy:"0",unionBonus:"0",teamProf:"0",myAllBuy:"0",allBuyUs:"0",myBonus:"0",roundBuy:"0",roundBonus:"0",queueNum:"0"}},e.langData=$ZHTW.game,e.eventData={begin:0,end:0},e.overTime=0,e.updateData=new egret.Timer(1e3,0),e.intervalIsStart=!1,e.myRound="0",e.roundError=!1,e.tempKeyNum="0",e.rateUSD=0,e.gainId="0",e.totalPot="0",e.oldRollId="0",e.oldAddr=$myAddress,e.isUpdatePlayerData=!1,e.skinName="resource/eui_modules/Game/GameUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.updateRound(),this.alertModal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAlertBgBling,this),this.showBuyModal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showBuyModalFun,this),this.extractBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.extractFun,this),setOverTime().then(function(t){5875>t&&(t=72e3+parseInt(t+"")),e.overTime=parseInt(t+"")}),getTotalPot().then(function(t){e.data.jackpot="e"+Number(Number(t).toFixed(2)),e.totalPot=Number(Number(t).toFixed(2))+""
}),$gameContractInstance.nCurrentGainId(function(t,n){t?console.log(t):(e.data.totalInvest=n.toString(),e.gainId=n.toString())}),this.updateData.addEventListener(egret.TimerEvent.TIMER,this.getData,this),this.updateData.start(),this.openModalsEvent()},e.prototype.stopAlertBgBling=function(){this.alertModal.visible&&(this.alertBgBling.stop(),this.alertModal.visible=!1)},e.prototype.showBuyModalFun=function(){$Modal.buyKey.buyKeyFun()},e.prototype.extractFun=function(){$Modal.extract.drawFun()},e.prototype.getData=function(){var t=this;this.intervalIsStart?this.intervalStart():getIsBegin().then(function(e){e?(t.intervalStart(),t.intervalIsStart=!0):(t.overTime=86400,t.data.timeRemaining=timestampToMoment(t.overTime))},function(t){})},e.prototype.intervalStart=function(){var t=this;this.overTime--,this.overTime%1800==0&&(this.updateRound(),this.updateOverTime()),this.oldAddr!==$myAddress?(this.updateCurrentGainId(),this.updatePlayerData(),this.oldAddr=$myAddress):this.overTime%60==0&&(this.updateCurrentGainId(),this.updatePlayerData()),this.overTime%3==0&&($gameContractInstance.nRollIn(function(e,n){e?console.log(e):t.oldRollId!=n.toString()&&(t.updateOverTime(),t.updateTotalPot(),t.updateCurrentGainId(),t.updatePlayerData(),setTimeout(function(){t.isUpdatePlayerData||t.updatePlayerData()},3e3),t.oldRollId=n.toString())}),getEthXUSDrate().then(function(e){t.rateUSD=parseFloat(e+"")})),this.data.timeRemaining=timestampToMoment(this.overTime)},e.prototype.updateRound=function(){var t=this;$gameContractInstance.round(function(e,n){e?console.log("4545"+e):t.data.roundNum=n.toNumber()})},e.prototype.updateOverTime=function(){var t=this;setOverTime().then(function(e){5875>e&&(e=72e3+parseInt(e+"")),t.overTime=parseInt(e+""),t.overTime>86400||(t.jackPotLabel.visible=!0,t.readyTimeLabel.visible=!1)})},e.prototype.updateTotalPot=function(){var t=this;getTotalPot().then(function(e){Number(e)<Number(t.totalPot)?t.data.jackpot="e"+t.totalPot:(t.data.jackpot="e"+Number(Number(e).toFixed(2)),t.totalPot=Number(Number(e).toFixed(2))+"");var n=parseFloat(t.rateUSD+"");t.data.jackpotUs=parseFloat(Number(e)*n+"").toFixed(4)+""},function(t){})},e.prototype.updateCurrentGainId=function(){var t=this;$gameContractInstance.nCurrentGainId(function(e,n){e?console.log(e):(parseInt(n.toString())<parseInt(t.gainId)?t.data.totalInvest=t.gainId:(t.data.totalInvest=n.toString(),t.gainId=n.toString()),$myAddress&&$gameContractInstance.getRollInArrayDetail($myAddress,function(e,n){if(e)console.log(e);else{var a=n.length;a>0?$gameContractInstance.getRollInArray(0,function(e,n){e?console.log(e):t.data.remainingBet=30-parseInt(n[1].toString())+""}):t.data.remainingBet="30"}}))})},e.prototype.updatePlayerData=function(){var t=this;if($myAddress)return new Promise(function(e){getMyKeyProp().then(function(n){if(n[0]){t.data.moduleData.unionBonus=parseFloat(web3js.fromWei(n[6].toString())).toFixed(2),t.data.moduleData.allTime=n[5].toString(),t.data.moduleData.allBuy=parseFloat(web3js.fromWei(n[1].toString())).toFixed(2),$Modal.gameStatistics.data.stats.extractCoin1=t.data.moduleData.unionBonus,t.data.moduleData.myBonus=parseFloat(web3js.fromWei(n[3].toString())).toFixed(2),parseFloat(t.data.moduleData.myBonus)+parseFloat(t.data.moduleData.unionBonus)>=1?$Modal.buyKey.data.input="0":$Modal.buyKey.data.input="1";var a=Number(t.data.moduleData.myBonus)>=1;n[2]>0?$gameContractInstance.getRollInArrayDetail($myAddress,function(n,o){if(n)console.log(n);else{var r=o.length;0==r||a?(t.alertModal.visible=!0,t.playAnimation(t.alertBgBling,!0)):(t.alertBgBling.stop(),t.alertModal.visible=!1),t.isUpdatePlayerData=!0,getMyEtraProp().then(function(n){t.data.moduleData.teamProf=parseFloat(web3js.fromWei(n[5].toString())).toFixed(2),$Modal.gameStatistics.data.stats.rcmdid=n[1].toString(),t.data.moduleData.rcmdid=n[1].toString(),e()})}}):(a?(t.alertModal.visible=!0,t.playAnimation(t.alertBgBling,!0)):(t.alertBgBling.stop(),t.alertModal.visible=!1),t.isUpdatePlayerData=!0,getMyEtraProp().then(function(n){t.data.moduleData.teamProf=parseFloat(web3js.fromWei(n[5].toString())).toFixed(2),$Modal.gameStatistics.data.stats.rcmdid=n[1].toString(),t.data.moduleData.rcmdid=n[1].toString(),e()}))}},function(t){console.log(t)})})},e.prototype.openModalsEvent=function(){var t=this;this.statisticsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.modalShowEvent($Modal.gameStatistics,116),$Modal.gameStatistics.getData()},this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.modalShowEvent($Modal.gameHelp,662)},this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){$myAddress?($Modal.betLoad.visible=!0,$gameContractInstance.playerIsRegi($myAddress,function(e,n){e?$alert("网络错误"):($Modal.betLoad.visible=!1,n?(t.modalShowEvent($Modal.refereeInfo,662),$Modal.refereeInfo.getUrl(),$Modal.refereeInfo.updateData.start()):t.modalShowEvent($Modal.register,662))})):t.modalShowEvent($Modal.register,662)},this),this.languageBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.modalShowEvent($Modal.language,662)},this)},e.prototype.modalShowEvent=function(t,e){t.visible=!0;var n=t.$children[1],a=egret.Tween.get(n);a.to({y:e},200),a=null},e.prototype.playAnimation=function(t,e){if(e)for(var n in t.items)t.items[n].props={loop:!0};t.play()},e}(eui.Component);__reflect(Game.prototype,"Game");var GameAlert=function(t){function e(){var e=t.call(this)||this;return e.msg="",e.skinName="resource/eui_modules/Game/GameAlertUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.submitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this)},e.prototype.clostFun=function(){$Modal.gameAlert.visible=!1},e}(eui.Component);__reflect(GameAlert.prototype,"GameAlert");var GameHelp=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.game,e.skinName="resource/eui_modules/Game/GameHelpUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.layout(),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this)},e.prototype.clostFun=function(){var t=$Modal.gameHelp.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.gameHelp.visible=!1,e=null})},e.prototype.layout=function(){var t=new eui.VerticalLayout;t.gap=50,t.paddingTop=30,t.horizontalAlign=egret.HorizontalAlign.LEFT,this.layoutGroup.layout=t},e}(eui.Component);__reflect(GameHelp.prototype,"GameHelp");var GameStatistics=function(t){function e(){var e=t.call(this)||this;return e.data={currentRound:"1",round:{drainTime:"00:00:00",activePot:"e0",usdt:"0.00000",firstBonus:"e0",secondBonus:"e0"},stats:{totalInvested:"0",totalUSTD:"0.00000",rewards:"0",rewardsUSTD:"0.00000",rcmdid:"0",extractCoin1:"0"},teams:{snakes:"0 ETH",whales:"0 ETH",bulls:"0 ETH",bears:"0 ETH"}},e.status=0,e.skinName="resource/eui_modules/Game/GameStatisticsUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),$Modal.extractUnit=this.ExtractUnitOne=new ExtractUnitTs,this.teamTabScr.addChild(this.ExtractUnitOne)},e.prototype.getData=function(){this.ExtractUnitOne.getData()},e.prototype.getTeamTotalPot=function(){var t=this;$gameContractInstance.teamPot(function(e,n){e?console.log("++++++",e):(t.data.stats.rewards=(.9*parseFloat(web3js.fromWei(n[0]).toString())).toFixed(4)+"",t.data.round.firstBonus="e"+(.4*parseFloat(web3js.fromWei(n[1]).toString())).toFixed(4),t.data.round.secondBonus="e"+(.2*parseFloat(web3js.fromWei(n[1]).toString())).toFixed(4))}),getEthXUSDrate().then(function(e){t.data.stats.totalUSTD=(parseFloat(e+"")*parseFloat(t.data.stats.totalInvested+"")).toFixed(4)+"",$Content.game.data.totalInvestUsd=t.data.stats.totalUSTD})},e.prototype.getTotalKey=function(){var t=this;$gameContractInstance.round(function(e,n){e?console.log(e):t.data.currentRound=""+n.toNumber()})},e.prototype.clostFun=function(){var t=$Modal.gameStatistics.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.gameStatistics.visible=!1,e=null})},e.prototype.selectTab=function(t){t!==this.status&&(0===t&&(this.tabBg1.visible=!0,this.tabAct1.source="statistics_text_round1_zh_png",this.tabActEn1.source="statistics_text_round1_en_png",this.tabBg2.visible=!1,this.tabAct2.source="statistics_text_stats1_zh_png",this.tabActEn2.source="statistics_text_stats1_en_png",this.tabBg3.visible=!1,this.tabAct3.source="statistics_text_teams1_zh_png",this.tabActEn3.source="statistics_text_teams1_en_png",this.roundTab.visible=!0,this.statsTab.visible=!1,this.teamsTab.visible=!1),1===t&&(this.tabBg1.visible=!1,this.tabAct1.source="statistics_text_round1_zh_png",this.tabActEn1.source="statistics_text_round1_en_png",this.tabBg2.visible=!0,this.tabAct2.source="statistics_text_stats1_zh_png",this.tabActEn2.source="statistics_text_stats1_en_png",this.tabBg3.visible=!1,this.tabAct3.source="statistics_text_teams1_zh_png",this.tabActEn3.source="statistics_text_teams1_en_png",this.roundTab.visible=!1,this.statsTab.visible=!0,this.teamsTab.visible=!1),2===t&&(this.tabBg1.visible=!1,this.tabAct1.source="statistics_text_round1_zh_png",this.tabActEn1.source="statistics_text_round1_en_png",this.tabBg2.visible=!1,this.tabAct2.source="statistics_text_stats1_zh_png",this.tabActEn2.source="statistics_text_stats1_en_png",this.tabBg3.visible=!0,this.tabAct3.source="statistics_text_teams1_zh_png",this.tabActEn3.source="statistics_text_teams1_en_png",this.roundTab.visible=!1,this.statsTab.visible=!1,this.teamsTab.visible=!0),this.status=t)},e}(eui.Component);__reflect(GameStatistics.prototype,"GameStatistics");var RefereeInfo=function(t){function e(){var e=t.call(this)||this;return e.updateData=new egret.Timer(2e3,0),e.myAddress=$myAddress,e.skinName="resource/eui_modules/Game/RefereeInfoUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.copyAddrUrl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyUrl.bind(this,"address"),this),this.copyIdUrl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyUrl.bind(this,"id"),this),this.updateData.addEventListener(egret.TimerEvent.TIMER,this.getData,this)},e.prototype.copyUrl=function(t){var e=document.getElementById("copyElement");e||(e=document.createElement("textarea"),e.id="copyElement",document.body.appendChild(e));var n=document.createElement("button");switch(n.setAttribute("id","btnId"),n.setAttribute("data-clipboard-action","copy"),n.setAttribute("data-clipboard-target","#copyElement"),document.body.appendChild(n),t){case"address":e.innerHTML=this.addressUrl.text;break;case"id":e.innerHTML=this.idUrl.text}var a=new ClipboardJS("#btnId",{target:function(){return document.querySelector("#copyElement")}});a.on("success",function(t){$alert($AlertMsg.copySuc)}),a.on("error",function(t){$alert("Copy error")}),n.click(),e.setAttribute("readonly","true"),e.style.width="0",e.style.height="0",e.style.opacity="0",n.style.width="0",n.style.height="0",n.style.opacity="0"},e.prototype.getData=function(){this.myAddress!==$myAddress&&(this.getUrl(),this.myAddress=$myAddress)},e.prototype.getUrl=function(){var t=this;if($myAddress){var e=location.href.split("?")[0];$gameContractInstance.pIDxAddr_($myAddress,function(n,a){if(n)$alert(n);else{var o=a.toString();"0"==o?(t.addressUrl.text="Loading",t.idUrl.text="Loading"):(t.addressUrl.text=e+"?"+$myAddress,t.idUrl.text=e+"?"+o)}}),this.myAddress=$myAddress}},e.prototype.clostFun=function(){this.updateData.stop();var t=$Modal.refereeInfo.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.refereeInfo.visible=!1,e=null})},e}(eui.Component);__reflect(RefereeInfo.prototype,"RefereeInfo");var Register=function(t){function e(){var e=t.call(this)||this;return e.langData=$ZHTW.game,e.skinName="resource/eui_modules/Game/RegisterUI.exml",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.modal.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clostFun,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.registerReg,this)},e.prototype.registerReg=function(){var t=this;if(!$myAddress)return void notSignInMetamask();$Modal.betLoad.visible=!0;var e=location.href,n=e.split("?")[1],a="0x0000000000000000000000000000000000000000";n?web3js.isAddress(n)?(a=n,this.registerFun(a)):isNaN(Number(n))?(console.log(web3js.fromAscii(n)),$alert("請保持瀏覽器地址後綴為正確的賬戶地址或id")):$gameContractInstance.playerxID_(n,function(e,n){e?$alert(e):(a=n[0],t.registerFun(a))}):this.registerFun(a)},e.prototype.registerFun=function(t){var e=this;if($myAddress){var n=web3js.toWei("0.02");$gameContractInstance.registerName(t,{from:$myAddress,value:n},function(t,n){t?$alert("网络错误"):$Modal.betLoad.visible=!1,setTimeout(function(){e.closeModalFun()},2e3)})}else notSignInMetamask(),$Modal.betLoad.visible=!1},e.prototype.clostFun=function(){var t=$Modal.register.$children[1],e=egret.Tween.get(t);e.to({y:1716},200).call(function(){$Modal.register.visible=!1,e=null})},e.prototype.closeModalFun=function(){var t=this,e=this.$children[1],n=egret.Tween.get(e);n.to({y:1716},200).call(function(){t.visible=!1,n=null})},e}(eui.Component);__reflect(Register.prototype,"Register");